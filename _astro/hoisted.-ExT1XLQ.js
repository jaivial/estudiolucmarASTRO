import{a as L}from"./axios.B4uVmeYG.js";import{T as H}from"./toastify.CHTvHrP4.js";import"./hoisted.DPTSRxCA.js";import"./_commonjsHelpers.Cpj98o6Y.js";var P=!0,T=!0;_();function G(){let e={},o=document.cookie;if(o==="")return e;let n=o.split(";");for(let t of n){let[d,s]=t.split("=");d=d.trim(),s=s?s.trim():"",e[d]=decodeURIComponent(s)}return e}function J(e){return G()[e]||null}J("userID");function K(e){return e.charAt(0).toUpperCase()+e.slice(1)}function V(){const e=document.getElementById("clock-settings"),o={weekday:"long",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZone:"Europe/Madrid"},n=new Date().toLocaleString("es-ES",o),t=K(n);e.textContent=t}V();setInterval(V,1e3);function $(){const e=document.getElementById("loading-screen-two");e.classList.remove("flex"),e.classList.add("hidden")}function _(){const e=document.getElementById("img-profile-photo-informacion-usuario"),o=document.getElementById("img-profile-photo-informacion-usuario-edicion"),n=document.getElementById("nombre-informacion-usuario"),t=document.getElementById("email-informacion-usuario"),d=document.getElementById("password-informacion-usuario"),s=document.getElementById("admin-informacion-usuario"),l=document.getElementById("admin-informacion-usuario-edicion-admin"),y=document.getElementById("admin-informacion-usuario-edicion-comercial"),b=document.getElementById("nombre-informacion-usuario-edicion"),f=document.getElementById("apellido-informacion-usuario-edicion"),r=document.getElementById("email-informacion-usuario-edicion"),u=document.getElementById("password-informacion-usuario-edicion");document.getElementById("rol-informacion-usuario-edicion"),document.getElementById("rol-edicion"),document.getElementById("container-informacion-usuario-allusers");const g=document.getElementById("bloques-informacion-usuario-allusers"),p=document.getElementById("tablaallusers");p.innerHTML="",L.get("https://estudiolucmar.com/backend/users/fetchusersdatabase.php").then(a=>{a.data.forEach(I=>{const h=document.createElement("div");h.classList.add("flex","flex-row","justify-between","items-center","gap-2","w-full","h-auto","py-2","border-b","border-gray-400","mt-2","px-8"),p.appendChild(h);const c=document.createElement("p");c.classList.add("text-md","font-bold","text-slate-800"),c.innerText=I.name+" "+I.apellido,h.appendChild(c);const U=document.createElement("div");h.appendChild(U);const C=document.createElementNS("http://www.w3.org/2000/svg","svg");C.setAttribute("xmlns","http://www.w3.org/2000/svg"),C.setAttribute("width","1.75em"),C.setAttribute("height","1.75em"),C.setAttribute("viewBox","0 0 1024 1024");const S=document.createElementNS("http://www.w3.org/2000/svg","path");S.setAttribute("fill","currentColor"),S.setAttribute("d","M512 0C229.232 0 0 229.232 0 512c0 282.784 229.232 512 512 512c282.784 0 512-229.216 512-512C1024 229.232 794.784 0 512 0m0 961.008c-247.024 0-448-201.984-448-449.01c0-247.024 200.976-448 448-448s448 200.977 448 448s-200.976 449.01-448 449.01M736 480H544V288c0-17.664-14.336-32-32-32s-32 14.336-32 32v192H288c-17.664 0-32 14.336-32 32s14.336 32 32 32h192v192c0 17.664 14.336 32 32 32s32-14.336 32-32V544h192c17.664 0 32-14.336 32-32s-14.336-32-32-32"),C.appendChild(S),U.appendChild(C),U.classList.add("hover:cursor-pointer","hover:bg-zinc-800","rounded-full","hover:font-extrabold","hover:text-white"),U.id=I.id,U.addEventListener("click",function(){je(I.id)})}),Q()}),L.get("https://estudiolucmar.com/backend/users/fetchusers.php",{withCredentials:!0}).then(a=>{a.data.forEach(m=>{if(m.profile_photo)e.src="data:image/jpeg;base64,"+m.profile_photo,o.src="data:image/jpeg;base64,"+m.profile_photo;else if(m.profile_photo==null){const A=document.createElement("p");A.textContent="No hay foto",document.getElementById("profile-photo-informacion-usuario").appendChild(A),document.getElementById("img-profile-photo-informacion-usuario").classList.add("hidden")}n.innerHTML="Nombre:</br>"+m.name+" "+m.apellido,t.innerHTML="Email: </br>"+m.email,d.innerHTML="Contraseña: </br>"+m.password,m.admin===1?s.innerHTML="Rol:</br>Administrador":s.innerHTML="Rol:</br>Comercial"});const h=document.getElementById("nombre-informacion-usuario").textContent.replace("Nombre:","").trim();document.getElementById("totalinmueblesasignadosUsuarioIniciado");const c=document.getElementById("totalinmueblesasignadostextUsuarioIniciado");c.innerHTML="";const U=document.getElementById("tablainmueblesasignadosUsuarioIniciado");U.innerHTML="";const C=document.getElementById("tablanoticiasasignadasUsuarioIniciado");C.innerHTML="";const S=document.getElementById("tablaencargosasignadosUsuarioIniciado");S.innerHTML="",L.get("https://estudiolucmar.com/backend/users/fetchinmueblesusuarios.php",{params:{responsable:h}}).then(m=>{if(m.data.success){c.innerHTML=m.data.totalInmuebles;const A=document.getElementById("leyendaDeColoresinmueblesUsuarioIniciado");m.data.totalInmuebles===0?A.classList.add("hidden"):A.classList.remove("hidden"),m.data.data.forEach((w,Z)=>{const v=document.createElement("div");v.classList.add("rounded-lg","flex","flex-row","justify-center","items-center","gap-0","w-full","h-auto","py-1","border-b","border-gray-400","mt-0","px-8"),U.appendChild(v),w.commentupdatetime==="red"?v.classList.add("bg-red-100"):w.commentupdatetime==="yellow"?v.classList.add("bg-yellow-100"):w.commentupdatetime==="green"&&v.classList.add("bg-green-100");const k=document.createElement("p");k.classList.add("text-center","py-1.5","font-sans","text-sm","leading-6"),k.innerHTML=w.direccion,v.appendChild(k)});const j=document.getElementById("totalnoticiasasignadasUsuarioIniciado"),B=document.getElementById("tablanoticiasasignadasUsuarioIniciado"),N=document.getElementById("leyendaDeColoresnoticiasUsuarioIniciado");j.innerHTML=m.data.inmueblesconnoticia.length+" ("+m.data.percentageNoticiastate.toFixed(0)+"%)",m.data.inmueblesconnoticia.length===0?N.classList.add("hidden"):N.classList.remove("hidden"),m.data.inmueblesconnoticia.forEach((w,Z)=>{const v=document.createElement("div");v.classList.add("rounded-lg","flex","flex-row","justify-center","items-center","gap-0","w-full","h-auto","py-1","border-b","border-gray-400","mt-0","px-8"),B.appendChild(v),w.noticiaupdatetime==="red"?v.classList.add("bg-red-100"):w.noticiaupdatetime==="yellow"?v.classList.add("bg-yellow-100"):w.noticiaupdatetime==="green"&&v.classList.add("bg-green-100");const k=document.createElement("p");k.classList.add("text-center","py-1.5","font-sans","text-sm","leading-6"),k.innerHTML=w.direccion,v.appendChild(k)});const E=document.getElementById("totalencargosasignadosUsuarioIniciado"),x=document.getElementById("tablaencargosasignadosUsuarioIniciado"),O=document.getElementById("leyendaDeColoresencargos");E.innerHTML=m.data.inmueblesconencargos.length+" ("+m.data.percentageEncargostate.toFixed(0)+"%)",m.data.inmueblesconencargos.length===0?O.classList.add("hidden"):O.classList.remove("hidden"),m.data.inmueblesconencargos.forEach((w,Z)=>{const v=document.createElement("div");v.classList.add("rounded-lg","flex","flex-row","justify-center","items-center","gap-0","w-full","h-auto","py-1","border-b","border-gray-400","mt-0","px-8"),x.appendChild(v),w.encargoupdatetime==="red"?v.classList.add("bg-red-100"):w.encargoupdatetime==="yellow"?v.classList.add("bg-yellow-100"):w.encargoupdatetime==="green"&&v.classList.add("bg-green-100");const k=document.createElement("p");k.classList.add("text-center","py-1.5","font-sans","text-sm","leading-6"),k.innerHTML=w.direccion,v.appendChild(k)})}else console.log("Error:",m.data),c.innerHTML="0"}).catch(m=>{console.log("Error:",m)}),document.getElementById("nombre-header-settings").innerHTML="¿Qué quieres hacer "+a.data[0].name+"?",b.value=a.data[0].name,f.value=a.data[0].apellido,r.value=a.data[0].email,u.value=a.data[0].password;const R=document.getElementById("rol-edicion");a.data[0].admin===0?(R.classList.add("hidden"),g.classList.add("hidden")):a.data[0].admin===1&&(R.classList.remove("hidden"),g.classList.remove("hidden")),a.data[0].admin===1?l.checked=!0:a.data[0].admin===0&&(y.checked=!0),localStorage.setItem("hidden-id-user",a.data[0].id)}),T=!0,Q(),setTimeout(function(){$()},500)}function X(){P?ie():ne(),P=!P,console.log(P)}const ee=document.getElementById("banner-informacion-usuario");ee.addEventListener("click",function(){X()});const oe=document.getElementById("cerrar-info-UsuarioIniciado");oe.addEventListener("click",function(){X()});function ie(){const e=document.getElementById("arrow-down-settings-infousuario"),o=document.getElementById("arrow-up-settings-infousuario"),n=document.getElementById("container-informacion-usuario");o.classList.add("block"),o.classList.remove("hidden"),e.classList.add("hidden"),e.classList.remove("block"),n.classList.add("flex"),n.classList.remove("hidden")}function ne(){const e=document.getElementById("arrow-down-settings-infousuario"),o=document.getElementById("arrow-up-settings-infousuario"),n=document.getElementById("container-informacion-usuario");e.classList.remove("hidden"),e.classList.add("block"),o.classList.remove("block"),o.classList.add("hidden"),n.classList.remove("flex"),n.classList.add("hidden");const t=document.getElementById("container-informacion-usuario-edicion");t.classList.remove("flex"),t.classList.add("hidden")}function ae(){T?de():se(),T=!T,console.log(T)}const te=document.getElementById("banner-informacion-usuario-allusers");te.addEventListener("click",function(){ae()});function de(){const e=document.getElementById("arrow-down-settings-infousuario-allusers"),o=document.getElementById("arrow-up-settings-infousuario-allusers"),n=document.getElementById("container-informacion-usuario-allusers");o.classList.add("block"),o.classList.remove("hidden"),e.classList.add("hidden"),e.classList.remove("block"),n.classList.add("flex"),n.classList.remove("hidden")}function se(){const e=document.getElementById("arrow-down-settings-infousuario-allusers"),o=document.getElementById("arrow-up-settings-infousuario-allusers"),n=document.getElementById("container-informacion-usuario-allusers");e.classList.remove("hidden"),e.classList.add("block"),o.classList.remove("block"),o.classList.add("hidden"),n.classList.remove("flex"),n.classList.add("hidden");const t=document.getElementById("informacion-usuario-individual");t.classList.remove("flex"),t.classList.add("hidden"),D(),M()}function re(){const e=document.getElementById("container-informacion-usuario");e.classList.remove("flex"),e.classList.add("hidden");const o=document.getElementById("container-informacion-usuario-edicion");o.classList.remove("hidden"),o.classList.add("flex")}const ce=document.getElementById("show-informacion-usuario-modo-edicion");ce.addEventListener("click",function(){re()});function le(){const e=document.getElementById("container-informacion-usuario");e.classList.remove("hidden"),e.classList.add("flex");const o=document.getElementById("container-informacion-usuario-edicion");o.classList.remove("flex"),o.classList.add("hidden")}const ue=document.getElementById("hide-informacion-usuario-modo-edicion");ue.addEventListener("click",function(){le()});function me(){Pe();const e=document.getElementById("informacionusuarioindividualbloque1");e.classList.remove("flex"),e.classList.add("hidden");const o=document.getElementById("informacionusuarioindividualbloque1-edicion");o.classList.remove("hidden"),o.classList.add("flex"),W()}const ge=document.getElementById("show-informacion-usuario-individual-modo-edicion");ge.addEventListener("click",function(){me()});function D(){const e=document.getElementById("informacionusuarioindividualbloque1");e.classList.remove("hidden"),e.classList.add("flex");const o=document.getElementById("informacionusuarioindividualbloque1-edicion");o.classList.remove("flex"),o.classList.add("hidden")}const fe=document.getElementById("hide-informacion-usuario-individual-modo-edicion");fe.addEventListener("click",function(){D()});function pe(){const e=document.getElementById("nombre-informacion-usuario-edicion"),o=document.getElementById("apellido-informacion-usuario-edicion"),n=document.getElementById("email-informacion-usuario-edicion"),t=document.getElementById("password-informacion-usuario-edicion"),d=document.querySelector('input[name="radio-admin-informacion-usuario"]:checked');document.getElementById("file-upload-avatar");const s=e.value,l=o.value,y=n.value,b=t.value,f=d.value;localStorage.getItem("hidden-id-user"),console.log(f);const u=document.getElementById("nombre-informacion-usuario").textContent.replace("Nombre:","").trim();console.log("nombreSinPrefijo",u);const g=s+" "+l;console.log("nombreCompletoNuevo",g),L.get("https://estudiolucmar.com/backend/users/updateuserinformation.php",{params:{nombre:s,apellido:l,email:y,password:b,admin:f},withCredentials:!0}).then(p=>{console.log("response.data",p.data),p.data.success?(L.get("https://estudiolucmar.com/backend/users/updateNombreResponsable.php",{params:{nombreCompletoAntiguo:u,nombreCompletoNuevo:g}}).then(a=>{console.log("response.data",a.data),a.data.success?console.log("Responsables actualizados correctamente:",a.data):console.error("Error updating responsables:",a.data.message)}).catch(a=>{console.error("Error fetching responsables:",a)}),q(),L.get("https://estudiolucmar.com/backend/auth/logout.php",{withCredentials:!0}).then(a=>{console.log("response.data",a.data),a.data.success?(console.log("Usuario cerrado correctamente:",a.data),window.location.href="/"):console.error("Error closing user:",a.data.message)}).catch(a=>{console.error("Error fetching user:",a)})):(H({text:"No se ha modificado ningún dato.",duration:2500,destination:"https://github.com/apvarun/toastify-js",newWindow:!0,close:!1,gravity:"top",position:"center",stopOnFocus:!0,style:{borderRadius:"10px",backgroundImage:"linear-gradient(to right top, #c62828, #b92125, #ac1a22, #a0131f, #930b1c)"},onClick:function(){}}).showToast(),q())}).catch(p=>{console.error("Error fetching user data:",p)})}const he=document.getElementById("update-user-information");he.addEventListener("click",function(){pe()});function be(){const e=document.getElementsByName("sample_image")[0],o=document.getElementById("img-profile-photo-informacion-usuario"),n=document.getElementById("img-profile-photo-informacion-usuario-edicion"),t=100*1024,d=s=>{const l=new FileReader;l.onload=function(y){const b=new Image;b.onload=function(){const f=document.createElement("canvas");let r=b.width,u=b.height;const g=r/u,p=Math.sqrt(t/.75);(r>p||u>p)&&(g>1?(r=p,u=r/g):(u=p,r=u*g)),f.width=r,f.height=u,f.getContext("2d").drawImage(b,0,0,r,u),f.toBlob(i=>{const I=new FormData;I.append("sample_image",i,"image.webp"),L.post("https://estudiolucmar.com/backend/users/updateprofilephoto.php",I,{withCredentials:!0}).then(h=>{o.src="",n.src="",o.src="data:image/jpeg;base64,"+h.data.profile_photo,n.src="data:image/jpeg;base64,"+h.data.profile_photo}).catch(h=>{console.error("Error uploading image:",h)})},"image/webp",.8)},b.src=y.target.result},l.readAsDataURL(s)};if(e.files.length>0){const s=e.files[0];s.type.match(/image.*/)?d(s):console.error("Invalid file type. Please upload an image file.")}else console.error("No file selected.")}const Ie=document.getElementById("update-profile-photo");Ie.addEventListener("click",function(){be()});function Ee(){const e=document.getElementsByName("sample_image_individual")[0],o=document.getElementById("img-profile-photo-informacion-usuario-individual"),n=document.getElementById("img-profile-photo-informacion-usuario-individual-edicion"),t=localStorage.getItem("hidden-id-user-administar"),d=100*1024,s=l=>{const y=new FileReader;y.onload=function(b){const f=new Image;f.onload=function(){const r=document.createElement("canvas");let u=f.width,g=f.height;const p=u/g,a=Math.sqrt(d/.75);(u>a||g>a)&&(p>1?(u=a,g=u/p):(g=a,u=g*p)),r.width=u,r.height=g,r.getContext("2d").drawImage(f,0,0,u,g),r.toBlob(I=>{const h=new FormData;h.append("sample_image_individual",I,"image.webp"),h.append("id",t),L.post("https://estudiolucmar.com/backend/users/updateprofilephotoIndividual.php",h).then(c=>{o.src="",n.src="",o.src="data:image/jpeg;base64,"+c.data.profile_photo,n.src="data:image/jpeg;base64,"+c.data.profile_photo}).catch(c=>{console.error("Error uploading image:",c)})},"image/webp",.8)},f.src=b.target.result},y.readAsDataURL(l)};if(e.files.length>0){const l=e.files[0];l.type.match(/image.*/)?s(l):console.error("Invalid file type. Please upload an image file.")}else console.error("No file selected.")}const ye=document.getElementById("update-profile-photo-individual");ye.addEventListener("click",function(){Ee()});function ve(){F();const e=document.getElementById("nombre-informacion-usuario-edicion-individual"),o=document.getElementById("apellido-informacion-usuario-edicion-individual"),n=document.getElementById("email-informacion-usuario-edicion-individual"),t=document.getElementById("password-informacion-usuario-edicion-individual"),d=document.querySelector('input[name="radio-admin-informacion-usuario-individual"]:checked'),s=localStorage.getItem("hidden-id-user-administar"),l=e.value,y=o.value,b=n.value,f=t.value,r=d.value,g=document.getElementById("nombre-informacion-usuario-individual").textContent.replace("Nombre:","").trim();console.log("nombreSinPrefijo",g);const p=l+" "+y;console.log("nombreCompletoNuevo",p),L.get("https://estudiolucmar.com/backend/users/checkDeleteUser.php",{params:{id:s}}).then(a=>{if(a.data.success)L.get("https://estudiolucmar.com/backend/users/updateuserinformationindividual.php",{params:{nombre:l,apellido:y,email:b,password:f,admin:r,id:s}}).then(i=>{i.data.success?(L.get("https://estudiolucmar.com/backend/users/updateNombreResponsable.php",{params:{nombreCompletoAntiguo:g,nombreCompletoNuevo:p}}).then(I=>{I.data.success?console.log("Responsables actualizados correctamente:",I.data):console.error("Error updating responsables:",I.data.message)}).catch(I=>{console.error("Error fetching responsables:",I)}),D(),W(),_(),M(),T=!1,H({text:"Información actualizada",duration:2500,destination:"https://github.com/apvarun/toastify-js",newWindow:!0,close:!1,gravity:"top",position:"center",stopOnFocus:!0,style:{borderRadius:"10px",backgroundImage:"linear-gradient(to right top, #005d09, #0b6316, #146921, #1d6f2b, #247535, #267a39, #287e3d, #2a8341, #278740, #248b3f, #20903e, #1c943d)"},onClick:function(){}}).showToast()):(H({text:"Ningún dato modificado",duration:2500,destination:"https://github.com/apvarun/toastify-js",newWindow:!0,close:!1,gravity:"top",position:"center",stopOnFocus:!0,style:{borderRadius:"10px",backgroundImage:"linear-gradient(to right top, #c62828, #b92125, #ac1a22, #a0131f, #930b1c)",textAlign:"center"},onClick:function(){}}).showToast(),D(),M(),T=!1)}).catch(i=>{console.error("Error fetching user data:",i)});else{let i=function(){Ce(),setTimeout(function(){Te(),window.location.href="/"},4e3)};M(),L.get("https://estudiolucmar.com/backend/users/updateuserinformationindividual.php",{params:{nombre:l,apellido:y,email:b,password:f,admin:r,id:s}}).then(I=>{I.data.success?(L.get("https://estudiolucmar.com/backend/users/updateNombreResponsable.php",{params:{nombreCompletoAntiguo:g,nombreCompletoNuevo:p}}).then(h=>{h.data.success?console.log("Responsables actualizados correctamente:",h.data):console.error("Error updating responsables:",h.data.message)}).catch(h=>{console.error("Error fetching responsables:",h)}),D(),W(),_(),T=!1):(D(),M(),T=!1)}).catch(I=>{console.error("Error fetching user data:",I)}),i()}}).catch(a=>{console.error("Error fetching user data:",a)})}const Le=document.getElementById("edit-button-noticia-editar-3");Le.addEventListener("click",function(){ve()});function Be(){F();const e=localStorage.getItem("hidden-id-user-administar"),n=document.getElementById("nombre-informacion-usuario-individual").textContent.replace("Nombre:","").trim();console.log("nombreSinPrefijo",n),L.get("https://estudiolucmar.com/backend/users/checkDeleteUser.php",{params:{id:e}}).then(t=>{t.data.success?(console.log("User response.data deleted successfully:",t.data),L.get("https://estudiolucmar.com/backend/users/deleteUser.php",{params:{id:e,nombreCompletoAntiguo:n}}).then(d=>{d.data.success?(H({text:"Usuario Eliminado",duration:2500,destination:"https://github.com/apvarun/toastify-js",newWindow:!0,close:!1,gravity:"top",position:"center",stopOnFocus:!0,style:{borderRadius:"10px",backgroundImage:"linear-gradient(to right top, #c62828, #b92125, #ac1a22, #a0131f, #930b1c)"},onClick:function(){}}).showToast(),Y(),M()):console.error("Error deleting user:",d.data.message)}).catch(d=>{console.error("Error fetching user:",d)})):(H({text:"No puedes borrar tu propia cuenta.",duration:2500,destination:"https://github.com/apvarun/toastify-js",newWindow:!0,close:!1,gravity:"top",position:"center",stopOnFocus:!0,style:{borderRadius:"10px",backgroundImage:"linear-gradient(to right top, #c62828, #b92125, #ac1a22, #a0131f, #930b1c)"},onClick:function(){}}).showToast(),M())}).catch(t=>{console.error("Error fetching user data:",t)})}const we=document.getElementById("delete-usuario-inidividual");we.addEventListener("click",function(){Be()});function xe(){const e=document.getElementById("toast-reload");e.classList.remove("hidden"),e.classList.add("flex")}const Ue=document.getElementById("edit-button-noticia-editar-1");Ue.addEventListener("click",function(){xe()});function q(){const e=document.getElementById("toast-reload");e.classList.remove("flex"),e.classList.add("hidden")}const ke=document.getElementById("hide-toast-reload");ke.addEventListener("click",function(){q()});function Ce(){const e=document.getElementById("toast-reload-edicion");e.classList.remove("hidden"),e.classList.add("flex")}function Te(){const e=document.getElementById("toast-reload-edicion");e.classList.remove("flex"),e.classList.add("hidden")}function Q(){const e=document.getElementById("loading-screen-settings");e.classList.remove("flex"),e.classList.add("hidden")}function Me(){const e=document.getElementById("agregar-user-container");e.classList.remove("flex"),e.classList.add("hidden");const o=document.getElementById("agregar-usuario-form");o.classList.remove("hidden"),o.classList.add("flex")}const He=document.getElementById("agregar-user-container");He.addEventListener("click",function(){Me()});function z(){const e=document.getElementById("agregar-usuario-form");e.classList.remove("flex"),e.classList.add("hidden");const o=document.getElementById("agregar-user-container");o.classList.remove("hidden"),o.classList.add("flex")}const Se=document.getElementById("cerrar-formulario-agregar-usuario");Se.addEventListener("click",function(){z()});function Ae(){const e=document.getElementById("nombre-informacion-usuario-agregar"),o=document.getElementById("apellido-informacion-usuario-agregar"),n=document.getElementById("email-informacion-usuario-agregar"),t=document.getElementById("password-informacion-usuario-agregar"),d=document.querySelector('input[name="radio-admin-informacion-usuario-agregar"]:checked'),s=e.value,l=o.value,y=n.value,b=t.value,f=d.value;L.get("https://estudiolucmar.com/backend/users/insertuserinformation.php",{params:{nombre:s,apellido:l,email:y,password:b,admin:f}}).then(r=>{r.data.success?(console.log("User data inserted successfully:",r.data),H({text:"Usuario agregado",duration:2500,destination:"https://github.com/apvarun/toastify-js",newWindow:!0,close:!1,gravity:"top",position:"center",stopOnFocus:!0,style:{borderRadius:"10px",backgroundImage:"linear-gradient(to right top, #005d09, #0b6316, #146921, #1d6f2b, #247535, #267a39, #287e3d, #2a8341, #278740, #248b3f, #20903e, #1c943d)"},onClick:function(){}}).showToast(),_(),z()):console.error("Error inserting user data:",r.data.message)}).catch(r=>{console.error("Error fetching user data:",r)})}function De(){var e=document.getElementById("nombre-informacion-usuario-agregar").value,o=document.getElementById("apellido-informacion-usuario-agregar").value,n=document.getElementById("email-informacion-usuario-agregar").value,t=document.getElementById("password-informacion-usuario-agregar").value;return!e||!o||!n||!t?(H({text:"Todos los campos son obligatorios.",duration:2500,destination:"https://github.com/apvarun/toastify-js",newWindow:!0,close:!1,gravity:"top",position:"center",stopOnFocus:!0,style:{borderRadius:"10px",backgroundImage:"linear-gradient(to right top, #c62828, #b92125, #ac1a22, #a0131f, #930b1c)"},onClick:function(){}}).showToast(),!1):L.get("https://estudiolucmar.com/backend/users/fetchusersdatabase.php").then(d=>d.data.map(l=>l.email).includes(n)?(H({text:"Un usuario con ese email ya existe.",duration:2500,destination:"https://github.com/apvarun/toastify-js",newWindow:!0,close:!1,gravity:"top",position:"center",stopOnFocus:!0,style:{borderRadius:"10px",backgroundImage:"linear-gradient(to right top, #c62828, #b92125, #ac1a22, #a0131f, #930b1c)"},onClick:function(){}}).showToast(),!1):(Ae(),!0)).catch(d=>(console.error("Error fetching user data:",d),!1))}const Re=document.getElementById("edit-button-noticia-editar-2");Re.addEventListener("click",function(){De()});function je(e){z(),F();const o=e;localStorage.setItem("hidden-id-user-administar",o);const n=document.getElementById("informacion-usuario-individual");n.classList.remove("hidden"),n.classList.add("flex");const t=document.getElementById("container-informacion-usuario-allusers");t.classList.remove("flex"),t.classList.add("hidden");const d=document.getElementById("img-profile-photo-informacion-usuario-individual"),s=document.getElementById("profile-photo-container"),l=document.getElementById("nombre-informacion-usuario-individual"),y=document.getElementById("email-informacion-usuario-individual"),b=document.getElementById("password-informacion-usuario-individual"),f=document.getElementById("admin-informacion-usuario-individual"),r=document.getElementById("noimagetext");document.getElementById("totalinmueblesasignados");const u=document.getElementById("totalinmueblesasignadostext");u.innerHTML="";const g=document.getElementById("tablainmueblesasignados");g.innerHTML="";const p=document.getElementById("tablanoticiasasignadas");p.innerHTML="";const a=document.getElementById("tablaencargosasignados");a.innerHTML="",d.src="",l.innerHTML="",y.innerHTML="",b.innerHTML="",f.innerHTML="",L.get("https://estudiolucmar.com/backend/users/fetchusersdatabaseID.php",{params:{id:o}}).then(i=>{if(i.data.success){console.log("User data inserted successfully:",i.data);const I=i.data.data.name+" "+i.data.data.apellido;i.data.data.profile_photo===null?(s.classList.add("hidden"),r.classList.remove("hidden")):(r.classList.add("hidden"),s.classList.remove("hidden"),d.src="data:image/jpeg;base64,"+i.data.data.profile_photo),l.innerHTML="Nombre:</br>"+i.data.data.name+" "+i.data.data.apellido,y.innerHTML="Email:</br>"+i.data.data.email,b.innerHTML="Contraseña:</br>"+i.data.data.password,f.innerHTML="Rol:</br>"+(i.data.data.admin===1?"Administrador":"Comercial");const h=I;L.get("https://estudiolucmar.com/backend/users/fetchinmueblesusuarios.php",{params:{responsable:h}}).then(c=>{if(c.data.success){u.innerHTML=c.data.totalInmuebles;const U=document.getElementById("leyendaDeColoresinmuebles");c.data.totalInmuebles===0?U.classList.add("hidden"):U.classList.remove("hidden"),c.data.data.forEach((B,N)=>{const E=document.createElement("div");E.classList.add("rounded-lg","flex","flex-row","justify-center","items-center","gap-0","w-full","h-auto","py-1","border-b","border-gray-400","mt-0","px-8"),g.appendChild(E),B.commentupdatetime==="red"?E.classList.add("bg-red-100"):B.commentupdatetime==="yellow"?E.classList.add("bg-yellow-100"):B.commentupdatetime==="green"&&E.classList.add("bg-green-100");const x=document.createElement("p");x.classList.add("text-center","py-1.5","font-sans","text-sm","leading-6"),x.innerHTML=B.direccion,E.appendChild(x)});const C=document.getElementById("totalnoticiasasignadas"),S=document.getElementById("tablanoticiasasignadas"),R=document.getElementById("leyendaDeColoresnoticias");C.innerHTML=c.data.inmueblesconnoticia.length+" ("+c.data.percentageNoticiastate.toFixed(0)+"%)",c.data.inmueblesconnoticia.length===0?R.classList.add("hidden"):R.classList.remove("hidden"),c.data.inmueblesconnoticia.forEach((B,N)=>{const E=document.createElement("div");E.classList.add("rounded-lg","flex","flex-row","justify-center","items-center","gap-0","w-full","h-auto","py-1","border-b","border-gray-400","mt-0","px-8"),S.appendChild(E),B.noticiaupdatetime==="red"?E.classList.add("bg-red-100"):B.noticiaupdatetime==="yellow"?E.classList.add("bg-yellow-100"):B.noticiaupdatetime==="green"&&E.classList.add("bg-green-100");const x=document.createElement("p");x.classList.add("text-center","py-1.5","font-sans","text-sm","leading-6"),x.innerHTML=B.direccion,E.appendChild(x)});const m=document.getElementById("totalencargosasignados"),A=document.getElementById("tablaencargosasignados"),j=document.getElementById("leyendaDeColoresencargosindividual");m.innerHTML=c.data.inmueblesconencargos.length+" ("+c.data.percentageEncargostate.toFixed(0)+"%)",c.data.inmueblesconencargos.length===0?j.classList.add("hidden"):j.classList.remove("hidden"),c.data.inmueblesconencargos.forEach((B,N)=>{const E=document.createElement("div");E.classList.add("rounded-lg","flex","flex-row","justify-center","items-center","gap-0","w-full","h-auto","py-1","border-b","border-gray-400","mt-0","px-8"),A.appendChild(E),B.encargoupdatetime==="red"?E.classList.add("bg-red-100"):B.encargoupdatetime==="yellow"?E.classList.add("bg-yellow-100"):B.encargoupdatetime==="green"&&E.classList.add("bg-green-100");const x=document.createElement("p");x.classList.add("text-center","py-1.5","font-sans","text-sm","leading-6"),x.innerHTML=B.direccion,E.appendChild(x)})}else console.log("Error:",c.data),u.innerHTML="0";M()}).catch(c=>{console.log("Error:",c)})}else console.error("Error inserting user data:",i.data.message)}).catch(i=>{console.error("Error fetching user data:",i)})}function W(){const e=localStorage.getItem("hidden-id-user-administar"),o=document.getElementById("noimagetext"),n=document.getElementById("profile-photo-container"),t=document.getElementById("nombre-informacion-usuario-individual"),d=document.getElementById("email-informacion-usuario-individual"),s=document.getElementById("password-informacion-usuario-individual"),l=document.getElementById("admin-informacion-usuario-individual"),y=document.getElementById("img-profile-photo-informacion-usuario-individual");t.innerHTML="",d.innerHTML="",s.innerHTML="",l.innerHTML="",y.src="",o.innerHTML="";const b=document.getElementById("img-profile-photo-informacion-usuario-individual-edicion"),f=document.getElementById("nombre-informacion-usuario-edicion-individual"),r=document.getElementById("apellido-informacion-usuario-edicion-individual"),u=document.getElementById("email-informacion-usuario-edicion-individual"),g=document.getElementById("password-informacion-usuario-edicion-individual"),p=document.getElementById("admin-informacion-usuario-edicion-admin-individual"),a=document.getElementById("admin-informacion-usuario-edicion-comercial-individual");b.src="",L.get("https://estudiolucmar.com/backend/users/fetchusersdatabaseID.php",{params:{id:e}}).then(i=>{i.data.success?(i.data.data.profile_photo===null?(n.classList.add("hidden"),o.classList.remove("hidden")):(o.classList.add("hidden"),n.classList.remove("hidden"),y.src="data:image/jpeg;base64,"+i.data.data.profile_photo,b.src="data:image/jpeg;base64,"+i.data.data.profile_photo),t.innerHTML="Nombre:</br>"+i.data.data.name+" "+i.data.data.apellido,d.innerHTML="Email:</br>"+i.data.data.email,s.innerHTML="Contraseña:</br>"+i.data.data.password,l.innerHTML="Rol:</br>"+(i.data.data.admin===1?"Administrador":"Comercial"),l.innerHTML="Rol:</br>"+(i.data.data.admin===0?"Comercial":"Administrador"),f.value=i.data.data.name,r.value=i.data.data.apellido,u.value=i.data.data.email,g.value=i.data.data.password,console.log("data admin gato lucas: "+i.data.data.admin),i.data.data.admin===1?p.checked=!0:i.data.data.admin===0&&(a.checked=!0)):console.error("Error inserting user data:",i.data.message),_e()}).catch(i=>{console.error("Error fetching user data:",i)})}function Y(){const e=document.getElementById("informacion-usuario-individual");e.classList.remove("flex"),e.classList.add("hidden"),document.getElementById("noimagetext").classList.add("hidden");const n=document.getElementById("container-informacion-usuario-allusers");n.classList.remove("hidden"),n.classList.add("flex"),_(),D(),F(),T=!1}const Ne=document.getElementById("cerrar-info-individual");Ne.addEventListener("click",function(){Y()});function M(){const e=document.getElementById("loading-screen-settings-informacion-usuario-individual");e.classList.remove("flex"),e.classList.add("hidden")}function F(){const e=document.getElementById("loading-screen-settings-informacion-usuario-individual");e.classList.add("flex"),e.classList.remove("hidden")}function _e(){const e=document.getElementById("loading-screen-settings-informacion-usuario-individual-modo-edicion");e.classList.remove("flex"),e.classList.add("hidden")}function Pe(){const e=document.getElementById("loading-screen-settings-informacion-usuario-individual-modo-edicion");e.classList.remove("hidden"),e.classList.add("flex")}
